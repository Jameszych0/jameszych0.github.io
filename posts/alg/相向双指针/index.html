<!DOCTYPE html>
<html lang="zh-cn"
  dir="ltr">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">








    






<link rel="icon" type="image/ico" href="https:/jameszych0.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https:/jameszych0.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https:/jameszych0.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="https:/jameszych0.github.io/android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="https:/jameszych0.github.io/apple-touch-icon.png">

<meta name="description" content=""/>



<title>
    
    相向双指针 | Jameszych&#39;s thoughts
    
</title>

<link rel="canonical" href="https://jameszych0.github.io/posts/alg/%E7%9B%B8%E5%90%91%E5%8F%8C%E6%8C%87%E9%92%88/"/>

<meta property="og:url" content="https://jameszych0.github.io/posts/alg/%E7%9B%B8%E5%90%91%E5%8F%8C%E6%8C%87%E9%92%88/">
  <meta property="og:site_name" content="Jameszych&#39;s thoughts">
  <meta property="og:title" content="相向双指针">
  <meta property="og:description" content="个人技术博客">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-10T11:12:47+08:00">
    <meta property="article:modified_time" content="2025-08-10T11:12:47+08:00">












<link rel="stylesheet" href="/assets/combined.min.bd9c45048142a855ab50a9ccc201985cbe63b64e35810800dad8aa9601ab918f.css" media="all">















    




</head>







<body class="light">

  <div class="content">
    <header>
      

<div class="header">

    

    <h1 class="header-title">
        <a href="https://jameszych0.github.io/">Jameszych&#39;s thoughts</a>
    </h1>

    <div class="header-menu">
        

        
        

        <p
            class="small ">
            <a href="/" >
                /home
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/posts" >
                /posts
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/categories" >
                /categories
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/tags" >
                /tags
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/resume.pdf" >
                /about
            </a>
        </p>
        
        
    </div>

    

</div>

    </header>

    <main class="main">
      



<div >
  <article>
    <div class="single-main-container">
      <div class="single-content">
        
        <div class="breadcrumbs"><a href="/">~</a><span class="breadcrumbs-separator">/</span><a href="/posts/">Posts</a><span class="breadcrumbs-separator">/</span>
        <a href="/posts/alg/%E7%9B%B8%E5%90%91%E5%8F%8C%E6%8C%87%E9%92%88/">相向双指针</a></div>
        
        <header class="single-intro-container">
          <h1 class="single-title">相向双指针</h1>
          
          <div class="single-subsummary">
            
            <div>
              
              <p class="single-date">
                <time datetime="2025-08-10T11:12:47&#43;08:00">August 10, 2025</time>
              </p>
            </div>
          </div>
        </header>

        <ul>
<li><a href="https://leetcode.cn/problems/two-sum-ii-input-array-is-sorted/">167. 两数之和 II - 输入有序数组</a></li>
<li><a href="https://leetcode.cn/problems/3sum/">15. 三数之和</a></li>
<li><a href="https://leetcode.cn/problems/valid-triangle-number/">611. 有效三角形的个数</a></li>
<li><a href="https://leetcode.cn/problems/4sum/">18. 四数之和</a></li>
<li><a href="https://leetcode.cn/problems/container-with-most-water/">11. 盛最多水的容器</a></li>
<li><a href="https://leetcode.cn/problems/trapping-rain-water/">42. 接雨水</a></li>
</ul>
<h2 class="heading" id="167-两数之和-ii---输入有序数组">
  167. 两数之和 II - 输入有序数组
  <a class="anchor" href="#167-%e4%b8%a4%e6%95%b0%e4%b9%8b%e5%92%8c-ii---%e8%be%93%e5%85%a5%e6%9c%89%e5%ba%8f%e6%95%b0%e7%bb%84">#</a>
</h2>
<p><a href="https://leetcode.cn/problems/two-sum-ii-input-array-is-sorted/">167. 两数之和 II - 输入有序数组</a></p>
<p><strong>题目要求：</strong></p>
<p>给定一个 <strong>升序排序</strong> 的整数数组，从中找出两个数，使它们的和等于目标值 <code>target</code>，并返回它们的下标（下标从 1 开始计数）。</p>
<h3 class="heading" id="思路">
  思路
  <a class="anchor" href="#%e6%80%9d%e8%b7%af">#</a>
</h3>
<p>最直接的想法是使用 <strong>双重循环</strong> 枚举所有可能的两数组合，判断它们的和是否等于 <code>target</code>。</p>
<p>暴力解法的时间复杂度就来到了$O(n^2)$，但是通过使用相向双指针可以将时间复杂度降到$O(n)$。</p>
<p>由于数组是 <strong>有序的</strong>，我们可以用 <strong>相向双指针</strong> 将时间复杂度降到 $O(n)$。</p>
<p><strong>思路：</strong></p>
<ol>
<li>初始化两个指针
<ul>
<li><code>left</code> 指向数组开头</li>
<li><code>right</code> 指向数组末尾</li>
</ul>
</li>
<li>计算当前两数之和 <code>sum = numbers[left] + numbers[right]</code></li>
<li>判断：
<ul>
<li>sum &gt; target → 说明右边的数太大，<code>right--</code></li>
<li>sum &lt; target → 说明左边的数太小，<code>left--</code></li>
<li>sum == target → 找到答案</li>
</ul>
</li>
<li>循环直到 <code>left &gt;= right</code> 结束</li>
</ol>
<p>这样可以保证：</p>
<ul>
<li>每次移动指针都会让搜索范围缩小</li>
<li>不会漏掉任何可能的组合</li>
</ul>
<h3 class="heading" id="代码">
  代码
  <a class="anchor" href="#%e4%bb%a3%e7%a0%81">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">Solution</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#0550ae">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">int</span><span style="color:#0550ae">&gt;</span> twoSum<span style="color:#1f2328">(</span>vector<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">int</span><span style="color:#0550ae">&gt;&amp;</span> numbers<span style="color:#1f2328">,</span> <span style="color:#cf222e">int</span> target<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> len <span style="color:#0550ae">=</span> numbers<span style="color:#1f2328">.</span>size<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> left <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> right <span style="color:#0550ae">=</span> len <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">while</span> <span style="color:#1f2328">(</span>left <span style="color:#0550ae">&lt;</span> right<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#cf222e">int</span> sum <span style="color:#0550ae">=</span> numbers<span style="color:#1f2328">[</span>left<span style="color:#1f2328">]</span> <span style="color:#0550ae">+</span> numbers<span style="color:#1f2328">[</span>right<span style="color:#1f2328">];</span>
</span></span><span style="display:flex;"><span>            <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>sum <span style="color:#0550ae">&gt;</span> target<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#57606a">// 和过大，右指针左移
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>                right<span style="color:#0550ae">--</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#6639ba">if</span> <span style="color:#1f2328">(</span>sum <span style="color:#0550ae">&lt;</span> target<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#57606a">// 和过小，左指针右移
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>                left<span style="color:#0550ae">++</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>left <span style="color:#0550ae">+</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">,</span> right <span style="color:#0550ae">+</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">return</span> <span style="color:#1f2328">{};</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">};</span>
</span></span></code></pre></div><h3 class="heading" id="复杂度分析">
  复杂度分析
  <a class="anchor" href="#%e5%a4%8d%e6%9d%82%e5%ba%a6%e5%88%86%e6%9e%90">#</a>
</h3>
<ul>
<li><strong>时间复杂度</strong>：$O(n)$</li>
<li><strong>空间复杂度</strong>：$O(\text{log}n)$（排序所需空间，若使用堆排序可降到 O(1)）</li>
</ul>
<h2 class="heading" id="15-三数之和">
  15. 三数之和
  <a class="anchor" href="#15-%e4%b8%89%e6%95%b0%e4%b9%8b%e5%92%8c">#</a>
</h2>
<p><a href="https://leetcode.cn/problems/3sum/">15. 三数之和</a></p>
<p><strong>题目要求：</strong></p>
<p>给定一个整数数组 <code>nums</code>，判断是否存在三元组 <code>[nums[i], nums[j], nums[k]]</code> 满足：</p>
<ul>
<li><code>i</code>、<code>j</code>、<code>k</code> 互不相同</li>
<li><code>nums[i] + nums[j] + nums[k] == 0</code>
返回 <strong>所有和为 0 且不重复的三元组</strong>。</li>
</ul>
<h3 class="heading" id="思路-1">
  思路
  <a class="anchor" href="#%e6%80%9d%e8%b7%af-1">#</a>
</h3>
<ol>
<li>
<p><strong>排序 + 相向双指针</strong></p>
<p>由于要找的三元组顺序不重要，并且要去重，我们先对数组进行升序排序：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>sort<span style="color:#1f2328">(</span>nums<span style="color:#1f2328">.</span>begin<span style="color:#1f2328">(),</span> nums<span style="color:#1f2328">.</span>end<span style="color:#1f2328">());</span>
</span></span></code></pre></div><p>排序后，我们用一个指针 <code>i</code> 枚举第一个元素，然后在 <code>i</code> 右侧的区间 <code>[i+1, len-1]</code> 内，用 <strong>左右指针</strong> (<code>left</code>、<code>right</code>) 找另外两个数，使三数之和为 0。</p>
<p>这样问题就转化为 <strong>两数之和 II</strong> 的思路。</p>
</li>
<li>
<p><strong>去重处理</strong></p>
<p>为了避免重复结果，需要在两个地方去重：</p>
<ul>
<li>
<p><strong>外层循环去重</strong></p>
<p>当 <code>nums[i] == nums[i - 1]</code> 时，说明当前枚举的第一个数和上一次相同，会产生重复三元组，因此跳过：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>i <span style="color:#0550ae">&gt;</span> <span style="color:#0550ae">0</span> <span style="color:#0550ae">&amp;&amp;</span> nums<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]</span> <span style="color:#0550ae">==</span> nums<span style="color:#1f2328">[</span>i <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">])</span> <span style="color:#cf222e">continue</span><span style="color:#1f2328">;</span>
</span></span></code></pre></div></li>
<li>
<p><strong>内层循环去重</strong></p>
<p>当找到一个满足条件的三元组后，跳过与当前 <code>nums[left]</code>、<code>nums[right]</code> 相同的值：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#cf222e">while</span> <span style="color:#1f2328">(</span>left <span style="color:#0550ae">&lt;</span> right <span style="color:#0550ae">&amp;&amp;</span> nums<span style="color:#1f2328">[</span>left<span style="color:#1f2328">]</span> <span style="color:#0550ae">==</span> nums<span style="color:#1f2328">[</span>left <span style="color:#0550ae">+</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">])</span> left<span style="color:#0550ae">++</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">while</span> <span style="color:#1f2328">(</span>left <span style="color:#0550ae">&lt;</span> right <span style="color:#0550ae">&amp;&amp;</span> nums<span style="color:#1f2328">[</span>right<span style="color:#1f2328">]</span> <span style="color:#0550ae">==</span> nums<span style="color:#1f2328">[</span>right <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">])</span> right<span style="color:#0550ae">--</span><span style="color:#1f2328">;</span>
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p><strong>双指针移动规则</strong></p>
<ul>
<li><code>sum &gt; 0</code> → 右指针左移，减小和</li>
<li><code>sum &lt; 0</code> → 左指针右移，增大和</li>
<li><code>sum == 0</code> → 记录结果，然后左右指针各移动一步，并跳过重复元素</li>
</ul>
</li>
<li>
<p><strong>优化</strong></p>
<ul>
<li>
<p>优化一：提前结束循环</p>
<p>若当前 <code>nums[i] + nums[i+1] + nums[i+2] &gt; 0</code>，说明后续所有组合的和都会大于 0，直接 <code>break</code>。</p>
</li>
<li>
<p>优化二：提前跳过无效情况</p>
<p>若当前 <code>nums[i] + nums[len-2] + nums[len-1] &lt; 0</code>，说明即使取最大的两个数，和也小于 0，因此跳过当前 <code>i</code> 继续枚举。</p>
</li>
</ul>
</li>
</ol>
<h3 class="heading" id="代码-1">
  代码
  <a class="anchor" href="#%e4%bb%a3%e7%a0%81-1">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">Solution</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#0550ae">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#0550ae">&lt;</span>vector<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">int</span><span style="color:#0550ae">&gt;&gt;</span> threeSum<span style="color:#1f2328">(</span>vector<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">int</span><span style="color:#0550ae">&gt;&amp;</span> nums<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        sort<span style="color:#1f2328">(</span>nums<span style="color:#1f2328">.</span>begin<span style="color:#1f2328">(),</span> nums<span style="color:#1f2328">.</span>end<span style="color:#1f2328">());</span>
</span></span><span style="display:flex;"><span>        vector<span style="color:#0550ae">&lt;</span>vector<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">int</span><span style="color:#0550ae">&gt;&gt;</span> res<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> len <span style="color:#0550ae">=</span> nums<span style="color:#1f2328">.</span>size<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">for</span> <span style="color:#1f2328">(</span><span style="color:#cf222e">int</span> i <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span> i <span style="color:#0550ae">&lt;</span> len <span style="color:#0550ae">-</span> <span style="color:#0550ae">2</span><span style="color:#1f2328">;</span> i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#57606a">// 外层去重
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>            <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>i <span style="color:#0550ae">&gt;</span> <span style="color:#0550ae">0</span> <span style="color:#0550ae">&amp;&amp;</span> nums<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]</span> <span style="color:#0550ae">==</span> nums<span style="color:#1f2328">[</span>i <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">])</span> <span style="color:#cf222e">continue</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#57606a">// 优化一：最小的三个数都大于 0，无需继续
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>            <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>nums<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]</span> <span style="color:#0550ae">+</span> nums<span style="color:#1f2328">[</span>i <span style="color:#0550ae">+</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">]</span> <span style="color:#0550ae">+</span> nums<span style="color:#1f2328">[</span>i <span style="color:#0550ae">+</span> <span style="color:#0550ae">2</span><span style="color:#1f2328">]</span> <span style="color:#0550ae">&gt;</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">)</span> <span style="color:#cf222e">break</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#57606a">// 优化二：当前值加最大的两个数仍小于 0，跳过
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>            <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>nums<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]</span> <span style="color:#0550ae">+</span> nums<span style="color:#1f2328">[</span>len <span style="color:#0550ae">-</span> <span style="color:#0550ae">2</span><span style="color:#1f2328">]</span> <span style="color:#0550ae">+</span> nums<span style="color:#1f2328">[</span>len <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">]</span> <span style="color:#0550ae">&lt;</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">)</span> <span style="color:#cf222e">continue</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#cf222e">int</span> left <span style="color:#0550ae">=</span> i <span style="color:#0550ae">+</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">,</span> right <span style="color:#0550ae">=</span> len <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#cf222e">while</span> <span style="color:#1f2328">(</span>left <span style="color:#0550ae">&lt;</span> right<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#cf222e">int</span> sum <span style="color:#0550ae">=</span> nums<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]</span> <span style="color:#0550ae">+</span> nums<span style="color:#1f2328">[</span>left<span style="color:#1f2328">]</span> <span style="color:#0550ae">+</span> nums<span style="color:#1f2328">[</span>right<span style="color:#1f2328">];</span>
</span></span><span style="display:flex;"><span>                <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>sum <span style="color:#0550ae">&gt;</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                    right<span style="color:#0550ae">--</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#6639ba">if</span> <span style="color:#1f2328">(</span>sum <span style="color:#0550ae">&lt;</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                    left<span style="color:#0550ae">++</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                    res<span style="color:#1f2328">.</span>push_back<span style="color:#1f2328">({</span>nums<span style="color:#1f2328">[</span>i<span style="color:#1f2328">],</span> nums<span style="color:#1f2328">[</span>left<span style="color:#1f2328">],</span> nums<span style="color:#1f2328">[</span>right<span style="color:#1f2328">]});</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#57606a">// 内层去重
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>                    <span style="color:#cf222e">while</span> <span style="color:#1f2328">(</span>left <span style="color:#0550ae">&lt;</span> right <span style="color:#0550ae">&amp;&amp;</span> nums<span style="color:#1f2328">[</span>left<span style="color:#1f2328">]</span> <span style="color:#0550ae">==</span> nums<span style="color:#1f2328">[</span>left <span style="color:#0550ae">+</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">])</span> left<span style="color:#0550ae">++</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#cf222e">while</span> <span style="color:#1f2328">(</span>left <span style="color:#0550ae">&lt;</span> right <span style="color:#0550ae">&amp;&amp;</span> nums<span style="color:#1f2328">[</span>right<span style="color:#1f2328">]</span> <span style="color:#0550ae">==</span> nums<span style="color:#1f2328">[</span>right <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">])</span> right<span style="color:#0550ae">--</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>                    left<span style="color:#0550ae">++</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>                    right<span style="color:#0550ae">--</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">return</span> res<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">};</span>
</span></span></code></pre></div><h3 class="heading" id="复杂度分析-1">
  复杂度分析
  <a class="anchor" href="#%e5%a4%8d%e6%9d%82%e5%ba%a6%e5%88%86%e6%9e%90-1">#</a>
</h3>
<ul>
<li><strong>时间复杂度</strong>：$O(n^2)$（外层 O(n) × 内层 O(n) 双指针）</li>
<li><strong>空间复杂度</strong>：$O(\text{log}n)$（排序所需空间，若使用堆排序可降到 O(1)）</li>
</ul>
<h2 class="heading" id="611-有效三角形的个数">
  611. 有效三角形的个数
  <a class="anchor" href="#611-%e6%9c%89%e6%95%88%e4%b8%89%e8%a7%92%e5%bd%a2%e7%9a%84%e4%b8%aa%e6%95%b0">#</a>
</h2>
<p><strong>题目要求：</strong></p>
<p>给定一个整数数组<code>nums</code>，判断是否存在三元组 <code>[nums[i], nums[j], nums[k]]</code> 满足：</p>
<ul>
<li><code>i</code>、<code>j</code>、<code>k</code> 互不相同</li>
<li>组成三角形三条边</li>
</ul>
<p>返回 三元组个数</p>
<h3 class="heading" id="思路-2">
  思路
  <a class="anchor" href="#%e6%80%9d%e8%b7%af-2">#</a>
</h3>
<p>要组成一个三角形，<strong>三角形不等式</strong>必须成立：
对于边长 <code>a ≤ b ≤ c</code>，只需保证：<code>a + b &gt; c</code></p>
<ol>
<li>
<p>对数组进行升序排序</p>
</li>
<li>
<p>用指针i枚举最大边<code>nums[i]</code></p>
</li>
<li>
<p>在区间<code>[0,i-1]</code>使用左右指针<code>left</code>,<code>right</code>遍历</p>
<ul>
<li>
<p>这样题目就间接地转化成了 <strong>两数之和 II</strong> 的思路。</p>
</li>
<li>
<p>若<code>nums[left] + nums[right] &gt; nums[i]</code>，说明 <code>[left, right]</code> 区间内所有数与 <code>nums[right]</code> 和 <code>nums[i]</code> 都能组成有效三角形</p>
<ul>
<li>
<p>因为数组已排序 → <code>nums[left+1] ≥ nums[left]</code>，所以更大的数也能满足条件。</p>
</li>
<li>
<p>此时可一次性统计 <strong><code>right - left</code> 个三角形</strong>，然后 <code>right--</code>。</p>
</li>
</ul>
</li>
<li>
<p>否则，<code>left++</code></p>
</li>
</ul>
</li>
</ol>
<h3 class="heading" id="代码-2">
  代码
  <a class="anchor" href="#%e4%bb%a3%e7%a0%81-2">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">Solution</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#0550ae">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> triangleNumber<span style="color:#1f2328">(</span>vector<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">int</span><span style="color:#0550ae">&gt;&amp;</span> nums<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> len <span style="color:#0550ae">=</span> nums<span style="color:#1f2328">.</span>size<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> count <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>        sort<span style="color:#1f2328">(</span>nums<span style="color:#1f2328">.</span>begin<span style="color:#1f2328">(),</span> nums<span style="color:#1f2328">.</span>end<span style="color:#1f2328">());</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">for</span> <span style="color:#1f2328">(</span><span style="color:#cf222e">int</span> i <span style="color:#0550ae">=</span> len <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">;</span> i <span style="color:#0550ae">&gt;=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span> i<span style="color:#0550ae">--</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#cf222e">int</span> left <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> right <span style="color:#0550ae">=</span> i <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#cf222e">while</span> <span style="color:#1f2328">(</span>left <span style="color:#0550ae">&lt;</span> right<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>nums<span style="color:#1f2328">[</span>left<span style="color:#1f2328">]</span> <span style="color:#0550ae">+</span> nums<span style="color:#1f2328">[</span>right<span style="color:#1f2328">]</span> <span style="color:#0550ae">&gt;</span> nums<span style="color:#1f2328">[</span>i<span style="color:#1f2328">])</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                    count <span style="color:#0550ae">+=</span> right <span style="color:#0550ae">-</span> left<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>                    right<span style="color:#0550ae">--</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                    left<span style="color:#0550ae">++</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">return</span> count<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">};</span>
</span></span></code></pre></div><h3 class="heading" id="复杂度分析-2">
  复杂度分析
  <a class="anchor" href="#%e5%a4%8d%e6%9d%82%e5%ba%a6%e5%88%86%e6%9e%90-2">#</a>
</h3>
<ul>
<li><strong>时间复杂度</strong>：$O(n^2)$（外层 O(n) × 内层 O(n) 双指针）</li>
<li><strong>空间复杂度</strong>：$O(\text{log}n)$（排序所需空间，若使用堆排序可降到 O(1)）</li>
</ul>
<h2 class="heading" id="11-盛最多水的容器">
  11. 盛最多水的容器
  <a class="anchor" href="#11-%e7%9b%9b%e6%9c%80%e5%a4%9a%e6%b0%b4%e7%9a%84%e5%ae%b9%e5%99%a8">#</a>
</h2>
<p><a href="https://leetcode.cn/problems/container-with-most-water/">11. 盛最多水的容器</a></p>
<p><strong>题目说明：</strong></p>
<p>给定一个长度为 <code>n</code> 的整数数组 <code>height</code> 。有 <code>n</code> 条垂线，第 <code>i</code> 条线的两个端点是 <code>(i, 0)</code> 和 <code>(i, height[i])</code> 。</p>
<p>找出其中的两条线，使得它们与 <code>x</code> 轴共同构成的容器可以容纳最多的水。</p>
<p>返回容器可以储存的最大水量。</p>
<pre tabindex="0"><code> 0 1 2 3 4 5 6 7 8  
[1,8,6,2,5,4,8,3,7]
1.(8-0)*1=8
2.(8-1)*7=49
3.(7-1)*3=24
4.(6-1)*8=40
</code></pre><h3 class="heading" id="思路-3">
  思路
  <a class="anchor" href="#%e6%80%9d%e8%b7%af-3">#</a>
</h3>
<p>使用左右指针<code>left</code>、<code>right</code>遍历数组，初始面积宽是最大，所以在向内遍历时，只有高度变大，面积才有可能变大。我们保留<code>height[left]</code>、<code>height[right]</code>中最大的，另一个指针移动。</p>
<ol>
<li>
<p>容积面积公式：<code>(right - left) * min(height[left], height[right]);</code></p>
<ul>
<li>宽度由 <code>(right - left)</code> 决定，高度由较短边决定</li>
</ul>
</li>
<li>
<p>移动规则：</p>
<p>初始宽度最大，若想让面积变大，必须尝试更高的边</p>
<ul>
<li>如果 <code>height[left] &lt; height[right]</code> → 左边较短 → 移动 <code>left++</code></li>
<li>如果 <code>height[left] ≥ height[right]</code> → 右边较短 → 移动 <code>right--</code></li>
</ul>
</li>
</ol>
<h3 class="heading" id="代码-3">
  代码
  <a class="anchor" href="#%e4%bb%a3%e7%a0%81-3">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">Solution</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#0550ae">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> maxArea<span style="color:#1f2328">(</span>vector<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">int</span><span style="color:#0550ae">&gt;&amp;</span> height<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> ans <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> left <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> right <span style="color:#0550ae">=</span> height<span style="color:#1f2328">.</span>size<span style="color:#1f2328">()</span> <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">while</span> <span style="color:#1f2328">(</span>left <span style="color:#0550ae">&lt;</span> right<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#cf222e">int</span> area <span style="color:#0550ae">=</span> <span style="color:#1f2328">(</span>right <span style="color:#0550ae">-</span> left<span style="color:#1f2328">)</span> <span style="color:#0550ae">*</span> min<span style="color:#1f2328">(</span>height<span style="color:#1f2328">[</span>left<span style="color:#1f2328">],</span> height<span style="color:#1f2328">[</span>right<span style="color:#1f2328">]);</span>
</span></span><span style="display:flex;"><span>            ans <span style="color:#0550ae">=</span> ans <span style="color:#0550ae">&gt;</span> area <span style="color:#0550ae">?</span> <span style="color:#900;font-weight:bold">ans</span> <span style="color:#1f2328">:</span> area<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>height<span style="color:#1f2328">[</span>left<span style="color:#1f2328">]</span> <span style="color:#0550ae">&gt;</span> height<span style="color:#1f2328">[</span>right<span style="color:#1f2328">])</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                right<span style="color:#0550ae">--</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                left<span style="color:#0550ae">++</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">}</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">return</span> ans<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">};</span>
</span></span></code></pre></div><h3 class="heading" id="复杂度分析-3">
  复杂度分析
  <a class="anchor" href="#%e5%a4%8d%e6%9d%82%e5%ba%a6%e5%88%86%e6%9e%90-3">#</a>
</h3>
<ul>
<li><strong>时间复杂度</strong>：$O(n)$</li>
<li><strong>空间复杂度</strong>：$O(1)$</li>
</ul>
<h2 class="heading" id="42-接雨水">
  42. 接雨水
  <a class="anchor" href="#42-%e6%8e%a5%e9%9b%a8%e6%b0%b4">#</a>
</h2>
<p><a href="https://leetcode.cn/problems/trapping-rain-water/">42. 接雨水</a></p>
<p><strong>题目要求：</strong></p>
<p>给定一个数组 <code>height</code>，表示柱子的高度。下雨后，柱子之间可能积水。请计算总共能接多少雨水。</p>
<h3 class="heading" id="思路-4">
  思路
  <a class="anchor" href="#%e6%80%9d%e8%b7%af-4">#</a>
</h3>
<h4 class="heading" id="方法一前后缀分解">
  方法一：前后缀分解
  <a class="anchor" href="#%e6%96%b9%e6%b3%95%e4%b8%80%e5%89%8d%e5%90%8e%e7%bc%80%e5%88%86%e8%a7%a3">#</a>
</h4>
<p>一个位置 <code>i</code> 能接的水量取决于它左边的最高柱子和右边的最高柱子和自己本身的高度：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>water<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]</span> <span style="color:#0550ae">=</span> min<span style="color:#1f2328">(</span>max<span style="color:#1f2328">(</span>height<span style="color:#1f2328">[</span><span style="color:#0550ae">0.</span><span style="color:#1f2328">.</span>i<span style="color:#1f2328">]),</span> max<span style="color:#1f2328">(</span>height<span style="color:#1f2328">[</span>i<span style="color:#1f2328">..</span>n<span style="color:#0550ae">-</span><span style="color:#0550ae">1</span><span style="color:#1f2328">]))</span> <span style="color:#0550ae">-</span> height<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]</span>
</span></span></code></pre></div><p>因此可以预处理：</p>
<ul>
<li><code>pre_max[i]</code>：从左到右的最高柱子</li>
<li><code>suf_max[i]</code>：从右到左的最高柱子</li>
</ul>
<p>最后累加：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ini" data-lang="ini"><span style="display:flex;"><span><span style="color:#1f2328">res</span> <span style="color:#0550ae">=</span> <span style="color:#0a3069">Σ (min(pre_max[i], suf_max[i]) - height[i])</span>
</span></span></code></pre></div><h4 class="heading" id="方法二相向双指针">
  方法二：相向双指针
  <a class="anchor" href="#%e6%96%b9%e6%b3%95%e4%ba%8c%e7%9b%b8%e5%90%91%e5%8f%8c%e6%8c%87%e9%92%88">#</a>
</h4>
<p>方法一需要 $O(n)$ 额外空间存储前后缀最大值。我们可以用左右指针同时维护：</p>
<ul>
<li><code>pre_max</code>：当前左边的最高柱子</li>
<li><code>suf_max</code>：当前右边的最高柱子</li>
</ul>
<p>核心逻辑：</p>
<ul>
<li>如果 <code>pre_max &lt; suf_max</code>：此时能接水的高度只取决于 <code>pre_max</code>
<ul>
<li>水量：<code>pre_max - height[left]</code></li>
<li>然后 <code>left++</code></li>
</ul>
</li>
<li>否则：能接水的高度取决于 <code>suf_max</code>
<ul>
<li>水量：<code>suf_max - height[right]</code></li>
<li>然后 <code>right--</code></li>
</ul>
</li>
</ul>
<p>这样即可在 $O(1)$ 空间内完成计算。</p>
<h3 class="heading" id="代码-4">
  代码
  <a class="anchor" href="#%e4%bb%a3%e7%a0%81-4">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#57606a">// 方法一：前后缀分解
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#cf222e">class</span> <span style="color:#1f2328">Solution</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#0550ae">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> trap<span style="color:#1f2328">(</span>vector<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">int</span><span style="color:#0550ae">&gt;&amp;</span> height<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> len <span style="color:#0550ae">=</span> height<span style="color:#1f2328">.</span>size<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>        vector<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">int</span><span style="color:#0550ae">&gt;</span> pre_max<span style="color:#1f2328">(</span>len<span style="color:#1f2328">);</span> <span style="color:#57606a">// pre_max[i] 表示从 height[0] 到 height[i] 的最大值
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>        pre_max<span style="color:#1f2328">[</span><span style="color:#0550ae">0</span><span style="color:#1f2328">]</span> <span style="color:#0550ae">=</span> height<span style="color:#1f2328">[</span><span style="color:#0550ae">0</span><span style="color:#1f2328">];</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">for</span> <span style="color:#1f2328">(</span><span style="color:#cf222e">int</span> i <span style="color:#0550ae">=</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">;</span> i <span style="color:#0550ae">&lt;</span> len<span style="color:#1f2328">;</span> i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            pre_max<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]</span> <span style="color:#0550ae">=</span> max<span style="color:#1f2328">(</span>pre_max<span style="color:#1f2328">[</span>i <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">],</span> height<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        vector<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">int</span><span style="color:#0550ae">&gt;</span> suf_max<span style="color:#1f2328">(</span>len<span style="color:#1f2328">);</span> <span style="color:#57606a">// suf_max[i] 表示从 height[i] 到 height[n-1] 的最大值
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>        suf_max<span style="color:#1f2328">[</span>len <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">]</span> <span style="color:#0550ae">=</span> height<span style="color:#1f2328">[</span>len <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">for</span> <span style="color:#1f2328">(</span><span style="color:#cf222e">int</span> i <span style="color:#0550ae">=</span> len <span style="color:#0550ae">-</span> <span style="color:#0550ae">2</span><span style="color:#1f2328">;</span> i <span style="color:#0550ae">&gt;=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span> i<span style="color:#0550ae">--</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            suf_max<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]</span> <span style="color:#0550ae">=</span> max<span style="color:#1f2328">(</span>suf_max<span style="color:#1f2328">[</span>i <span style="color:#0550ae">+</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">],</span> height<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> res <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">for</span> <span style="color:#1f2328">(</span><span style="color:#cf222e">int</span> i <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span> i <span style="color:#0550ae">&lt;</span> len<span style="color:#1f2328">;</span> i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            res <span style="color:#0550ae">+=</span> min<span style="color:#1f2328">(</span>pre_max<span style="color:#1f2328">[</span>i<span style="color:#1f2328">],</span> suf_max<span style="color:#1f2328">[</span>i<span style="color:#1f2328">])</span> <span style="color:#0550ae">-</span> height<span style="color:#1f2328">[</span>i<span style="color:#1f2328">];</span> <span style="color:#57606a">// 累加每个水桶能接多少水
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>        <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">return</span> res<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span><span style="color:#57606a">// 方法二：相向双指针
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#cf222e">class</span> <span style="color:#1f2328">Solution</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#0550ae">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> trap<span style="color:#1f2328">(</span>vector<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">int</span><span style="color:#0550ae">&gt;&amp;</span> height<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> len <span style="color:#0550ae">=</span> height<span style="color:#1f2328">.</span>size<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> left <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> right <span style="color:#0550ae">=</span> len <span style="color:#0550ae">-</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> pre_max <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> suf_max <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">int</span> res <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">while</span> <span style="color:#1f2328">(</span>left <span style="color:#0550ae">&lt;</span> right<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            pre_max <span style="color:#0550ae">=</span> max<span style="color:#1f2328">(</span>pre_max<span style="color:#1f2328">,</span> height<span style="color:#1f2328">[</span>left<span style="color:#1f2328">]);</span>
</span></span><span style="display:flex;"><span>            suf_max <span style="color:#0550ae">=</span> max<span style="color:#1f2328">(</span>suf_max<span style="color:#1f2328">,</span> height<span style="color:#1f2328">[</span>right<span style="color:#1f2328">]);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>pre_max <span style="color:#0550ae">&lt;</span> suf_max<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                res <span style="color:#0550ae">+=</span> pre_max <span style="color:#0550ae">-</span> height<span style="color:#1f2328">[</span>left<span style="color:#1f2328">];</span>
</span></span><span style="display:flex;"><span>                left<span style="color:#0550ae">++</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                res <span style="color:#0550ae">+=</span> suf_max <span style="color:#0550ae">-</span> height<span style="color:#1f2328">[</span>right<span style="color:#1f2328">];</span>
</span></span><span style="display:flex;"><span>                right<span style="color:#0550ae">--</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">return</span> res<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">};</span>
</span></span></code></pre></div><h3 class="heading" id="复杂度分析-4">
  复杂度分析
  <a class="anchor" href="#%e5%a4%8d%e6%9d%82%e5%ba%a6%e5%88%86%e6%9e%90-4">#</a>
</h3>
<ul>
<li><strong>时间复杂度</strong>：$O(n)$，两种方法都需要遍历数组。</li>
<li><strong>空间复杂度</strong>：
<ul>
<li>方法一：$O(n)$（存储前后缀最大值）</li>
<li>方法二：$O(1)$（只用常数变量记录最大值）</li>
</ul>
</li>
</ul>
      </div>
      <aside class="toc">
        <p><strong>Table of contents</strong></p>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#167-两数之和-ii---输入有序数组">167. 两数之和 II - 输入有序数组</a>
      <ul>
        <li><a href="#思路">思路</a></li>
        <li><a href="#代码">代码</a></li>
        <li><a href="#复杂度分析">复杂度分析</a></li>
      </ul>
    </li>
    <li><a href="#15-三数之和">15. 三数之和</a>
      <ul>
        <li><a href="#思路-1">思路</a></li>
        <li><a href="#代码-1">代码</a></li>
        <li><a href="#复杂度分析-1">复杂度分析</a></li>
      </ul>
    </li>
    <li><a href="#611-有效三角形的个数">611. 有效三角形的个数</a>
      <ul>
        <li><a href="#思路-2">思路</a></li>
        <li><a href="#代码-2">代码</a></li>
        <li><a href="#复杂度分析-2">复杂度分析</a></li>
      </ul>
    </li>
    <li><a href="#11-盛最多水的容器">11. 盛最多水的容器</a>
      <ul>
        <li><a href="#思路-3">思路</a></li>
        <li><a href="#代码-3">代码</a></li>
        <li><a href="#复杂度分析-3">复杂度分析</a></li>
      </ul>
    </li>
    <li><a href="#42-接雨水">42. 接雨水</a>
      <ul>
        <li><a href="#思路-4">思路</a></li>
        <li><a href="#代码-4">代码</a></li>
        <li><a href="#复杂度分析-4">复杂度分析</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </aside>
    </div>
  </article>

  

  

  
  

<div class="single-pagination">
    <hr />

    <div class="flexnowrap">

        <div class="single-pagination-prev">
            
            <div class="single-pagination-container-prev">
                <div class="single-pagination-text">←</div>
                <div class="single-pagination-text">
                    <a href="/posts/tech/hugo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/">
                        hugo博客搭建及使用
                    </a>
                </div>
            </div>
            
        </div>

        <div class="single-pagination-next">
            
            <div class="single-pagination-container-next">
                <div class="single-pagination-text">
                    <a href="/posts/tech/typora&#43;picgo-core&#43;github%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA/">
                        typora&#43;picgo-core&#43;github图床搭建
                    </a>
                </div>
                <div class="single-pagination-text">→</div>
            </div>
            
        </div>

    </div>

    <hr />
</div>



  

  

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


    </main>
  </div>

  
  





    




  <footer>
    


  </footer>

  
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css">
<script defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script>

<script defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"
  onload="renderMathInElement(document.body);"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false }
      ]
    });
  });
</script>
  
</body>

<script src="/js/theme-switch.js"></script>
<script defer src="/js/copy-code.js"></script>
</html>
